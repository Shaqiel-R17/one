{"generator":"Code Snippets v2.14.2","date_created":"2021-11-17 19:03","snippets":[{"name":"Order snippets by date","desc":"Order snippets by last modification date by default in the snippets table.","tags":["code-snippets-plugin"],"scope":"admin","code":"\nadd_filter( 'code_snippets\/list_table\/default_orderby', function () {\n\treturn 'modified';\n} );\n\nadd_filter( 'code_snippets\/list_table\/default_order', function () {\n\treturn 'desc';\n} );\n","priority":"10"},{"name":"WC - Checkout - Email on first place","scope":"global","code":"add_filter( 'woocommerce_checkout_fields', 'misha_email_first' );\n \nfunction misha_email_first( $checkout_fields ) {\n\t$checkout_fields['billing']['billing_email']['priority'] = 4;\n\t$checkout_fields['shipping']['shipping_email']['priority'] = 4;\n\treturn $checkout_fields;\n}","priority":"10"},{"name":"WC - Remove \"What is PayPal?\"","scope":"global","code":"add_filter( 'woocommerce_gateway_icon', 'bbloomer_remove_what_is_paypal', 10, 2 );\n \nfunction bbloomer_remove_what_is_paypal( $icon_html, $gateway_id ) {\nif( 'paypal' == $gateway_id ) {\n   $icon_html = '<img src=\"\/wp-content\/plugins\/woocommerce\/includes\/gateways\/paypal\/assets\/images\/paypal.png\" alt=\"PayPal Acceptance Mark\">';\n}\nreturn $icon_html;\n}","priority":"10"},{"name":"WC - Checkout - Inline Fields \/ Remove Fields \/ Change Placeholder","scope":"global","code":"\/\/ Remove additional order notes\nadd_filter( 'woocommerce_enable_order_notes_field', '__return_false' );\n\n\/\/ Custom Checkout billing fields\nadd_filter('woocommerce_checkout_fields', 'custom_checkout_billing_fields', 20, 1);\n function custom_checkout_billing_fields($fields)\n {\n$domain = 'woocommerce';\n\/\/ Remove billing\/shipping address 2\nunset($fields['billing']['billing_address_2']);\nunset($fields['shipping']['shipping_address_2']);\nunset($fields['billing']['billing_state']);\nunset($fields['shipping']['shipping_state']);\n\n\/\/ BILLING - Change class\n$fields['billing']['billing_phone']['class'] = array('form-row-wide'); \/\/  100%\n$fields['billing']['billing_email']['class'] = array('form-row-wide'); \/\/  100%\n$fields['billing']['billing_address_1']['class'] = array('form-row-wide'); \/\/  100%\n$fields['billing']['billing_postcode']['class'] = array('form-row-wide'); \/\/  50%\n$fields['billing']['billing_city']['class'] = array('form-row-wide'); \/\/ 50%\n$fields['billing']['billing_company']['class'] = array('form-row-wide'); \/\/ 100%\n\t \n\/\/ SHIPPING - Change class\n$fields['shipping']['shipping_phone']['class'] = array('form-row-wide'); \/\/  100%\n$fields['shipping']['shipping_email']['class'] = array('form-row-wide'); \/\/  100%\n$fields['shipping']['shipping_address_1']['class'] = array('form-row-wide'); \/\/  100%\n$fields['shipping']['shipping_postcode']['class'] = array('form-row-wide'); \/\/  50%\n$fields['shipping']['shipping_city']['class'] = array('form-row-wide'); \/\/ 50%\n$fields['shipping']['shipping_company']['class'] = array('form-row-wide'); \/\/ 100%\n\n\/\/ BILLING - Change placeholder\n$fields['billing']['billing_email']['placeholder'] = __('E-Mail', $domain);\n$fields['billing']['billing_first_name']['placeholder'] = __('Vorname', $domain);\n$fields['billing']['billing_last_name']['placeholder'] = __('Nachname', $domain);\n$fields['billing']['billing_company']['placeholder'] = __('Firmenname (optional)', $domain);\n$fields['billing']['billing_address_1']['placeholder'] = __('Strasse und Hausnummer', $domain);\n$fields['billing']['billing_postcode']['placeholder'] = __('PLZ', $domain);\n$fields['billing']['billing_city']['placeholder'] = __('Ort', $domain);\n$fields['billing']['billing_phone']['placeholder'] = __('Mobilenummer', $domain);\n\t \n\/\/ SHIPPING - Change placeholder\n$fields['shipping']['shipping_email']['placeholder'] = __('E-Mail', $domain);\n$fields['shipping']['shipping_first_name']['placeholder'] = __('Vorname', $domain);\n$fields['shipping']['shipping_last_name']['placeholder'] = __('Nachname', $domain);\n$fields['shipping']['shipping_company']['placeholder'] = __('Firmenname (optional)', $domain);\n$fields['shipping']['shipping_address_1']['placeholder'] = __('Stra\u00dfe und Hausnummer', $domain);\n$fields['shipping']['shipping_postcode']['placeholder'] = __('PLZ', $domain);\n$fields['shipping']['shipping_city']['placeholder'] = __('Ort', $domain);\n$fields['shipping']['shipping_phone']['placeholder'] = __('Mobilenummer', $domain);\n\t \n\nreturn $fields;\n}","priority":"10"},{"name":"WP - Disable Admin Bar for all Users","scope":"global","code":"  show_admin_bar(false);","priority":"10"},{"name":"WC - Product Archive - Add Short Description to Loop","scope":"global","code":"add_action( 'woocommerce_after_shop_loop_item_title', 'wc_add_short_description' );\nfunction wc_add_short_description() {\n\tglobal $product;\n\n\t?>\n        <div itemprop=\"description\">\n            <?php echo apply_filters( 'woocommerce_short_description', $product->post-> post_excerpt ) ?>\n        <\/div>\n\t<?php\n}","priority":"10"},{"name":"WC - Remove Star Rating Text \"Customer Reviews\"","scope":"global","code":"add_filter( 'woocommerce_product_tabs', 'my_custom_description_tab', 98 ); \nfunction my_custom_description_tab( $tabs ) { \n \n $tabs['reviews']['callback'] = 'my_custom_description_tab_content'; \n return $tabs; \n} \n \nfunction my_custom_description_tab_content() { \n echo '<h2>Custom Description<\/h2>'; \n echo '<p>Here\\'s a custom description<\/p>'; \n} ","priority":"10"},{"name":"WP - Translations","scope":"global","code":"function translate_text( $translated ) {\n\n  \/\/ The first parameter is the original text, the second parameter is the changed text.\n  $translated = str_ireplace( 'Gutschein anwenden',  'Einl\u00f6sen',  $translated );\n\t$translated = str_ireplace( 'Apply',  'Ok',  $translated );\n\t$translated = str_ireplace( 'Coupon code',  'Gutscheincode',  $translated );\n\t$translated = str_ireplace( 'Reply',  'Antworten',  $translated );\n\t$translated = str_ireplace( 'Last Post',  'Letzer Beitrag',  $translated );\n\t$translated = str_ireplace( 'week',  'Woche',  $translated );\n\t$translated = str_ireplace( 'weeks',  'Wochen',  $translated );\n\t$translated = str_ireplace( 'day',  'Tag',  $translated );\n\t$translated = str_ireplace( 'days',  'Tagen',  $translated );\n\t$translated = str_ireplace( 'hour',  'Stunde',  $translated );\n\t$translated = str_ireplace( 'hours',  'Stunden',  $translated );\n\t$translated = str_ireplace( 'month',  'Monat',  $translated );\n\t$translated = str_ireplace( 'months',  'Monaten',  $translated );\n\t$translated = str_ireplace( 'Your cart is currently empty.',  'Dein Warenkorb ist leer.',  $translated );\n\t$translated = str_ireplace( 'Gesamtsumme',  \"Gesamtsumme inkl. MwSt. und Versand\",  $translated );\n\t$translated = str_ireplace( 'Continue with Google',  \"Anmelden mit Google\",  $translated );\n\t$translated = str_ireplace( 'Continue with Facebook',  \"Anmelden mit Facebook\",  $translated );\n\t$translated = str_ireplace( 'Link account with Google',  \"Mit Google verbinden\",  $translated );\n\t$translated = str_ireplace( 'Link account with Facebook',  \"Mit Facebook verbinden\",  $translated );\n\t$translated = str_ireplace( 'Add to cart', \"In den Warenkorb\",  $translated );\n\t$translated = str_ireplace( 'customer review', \"\",  $translated );\n\t\n  \/\/ Returns the translated text\n  return $translated;\n\n}\nadd_filter( 'gettext',  'translate_text' );\nadd_filter( 'ngettext',  'translate_text' );","priority":"10"},{"name":"WC - Subscriptions - Shop Page normal \"Add to cart\"-Button","scope":"global","code":"add_action( 'init', 'sw_wcsatt_restore_add_to_cart_functionality' );\n\nfunction sw_wcsatt_restore_add_to_cart_functionality() {\n\tremove_filter( 'woocommerce_product_add_to_cart_text', array( 'WCS_ATT_Display_Product', 'add_to_cart_text' ), 10, 2 );\n\tremove_filter( 'woocommerce_product_add_to_cart_url', array( 'WCS_ATT_Display_Product', 'add_to_cart_url' ), 10, 2 );\n\tremove_filter( 'woocommerce_product_supports', array( 'WCS_ATT_Display_Product', 'supports_ajax_add_to_cart' ), 10, 3 );\n}","priority":"10"},{"name":"WC - Password strength","scope":"global","code":"add_action( 'wp_enqueue_scripts', 'misha_deactivate_pass_strength_meter', 10 );\nfunction misha_deactivate_pass_strength_meter() {\n\twp_dequeue_script( 'wc-password-strength-meter' );\n}","priority":"10"},{"name":"WP - Default Register URL","scope":"global","code":"add_filter( 'register_url', 'custom_register_url' );\nfunction custom_register_url( $register_url )\n{\n    $register_url = \"\/registrieren\";\n    return $register_url;\n}","priority":"10"},{"name":"WC - Cart - Auto update Cart","scope":"global","code":"add_action( 'wp_footer', 'bbloomer_cart_refresh_update_qty' ); \n \nfunction bbloomer_cart_refresh_update_qty() { \n   if (is_cart()) { \n      ?> \n      <script type=\"text\/javascript\"> \n         jQuery('div.woocommerce').on('change', 'input.qty', function(){\n            jQuery(\"[name='update_cart']\").removeAttr(\"disabled\").trigger(\"click\"); \n         }); \n      <\/script> \n      <?php \n   } \n}","priority":"10"},{"name":"WC - Shortcode - Reviews Count","scope":"global","code":"add_shortcode(\n    'reviews_count',\n    function() {\n        \/\/ Make sure we're on a Product.\n        if ( function_exists( 'is_product' ) && is_product() ) {\n            \/\/ Get a WC_Product object for the current product.\n            $product = wc_get_product( get_queried_object_id() );\n            \/\/ Return the review count.\n            return $product->get_review_count();\n        }\n    }\n);\n","priority":"10"},{"name":"WC - Shortcode - Review Average","scope":"global","code":"add_shortcode(\n    'reviews_average',\n    function() {\n        \/\/ Make sure we're on a Product.\n        if ( function_exists( 'is_product' ) && is_product() ) {\n            \/\/ Get a WC_Product object for the current product.\n            $product = wc_get_product( get_queried_object_id() );\n            \/\/ Return the review count.\n            return $product->get_average_rating();\n        }\n    }\n);\n","priority":"10"},{"name":"WC - Shortcode - Review Counts - 5 Count","scope":"global","code":"add_shortcode(\n    'reviews_count_more_than_4',\n    function() {\n        \/\/ Make sure we're on a Product.\n        if ( function_exists( 'is_product' ) && is_product() ) {\n            \/\/ Get a WC_Product object for the current product.\n            $product = wc_get_product( get_queried_object_id() );\n            \/\/ Return the review count.\n            return $product->get_rating_count(5);\n        }\n    }\n);\n","priority":"10"},{"name":"WC - Disable WC Cart Fragments","scope":"global","code":"add_action( 'wp_enqueue_scripts', 'disable_woocommerce_cart_fragments', 11 ); \n \nfunction disable_woocommerce_cart_fragments() { \n   wp_dequeue_script( 'wc-cart-fragments' ); \n}","priority":"10"},{"name":"WC - Checkout - Hide coupon field on the checkout page","scope":"global","code":"function disable_coupon_field_on_checkout( $enabled ) {\n\tif ( is_checkout() ) {\n\t\t$enabled = false;\n\t}\n\treturn $enabled;\n}\nadd_filter( 'woocommerce_coupons_enabled', 'disable_coupon_field_on_checkout' );","priority":"10"},{"name":"WC - Thankyoupage - Change text","scope":"global","code":"add_filter( 'the_title', 'woo_personalize_order_received_title', 10, 2 );\nfunction woo_personalize_order_received_title( $title, $id ) {\n    if ( is_order_received_page() && get_the_ID() === $id ) {\n\t    global $wp;\n\n        \/\/ Get the order. Line 9 to 17 are present in order_received() in includes\/shortcodes\/class-wc-shortcode-checkout.php file\n        $order_id  = apply_filters( 'woocommerce_thankyou_order_id', absint( $wp->query_vars['order-received'] ) );\n        $order_key = apply_filters( 'woocommerce_thankyou_order_key', empty( $_GET['key'] ) ? '' : wc_clean( $_GET['key'] ) );\n\n        if ( $order_id > 0 ) {\n            $order = wc_get_order( $order_id );\n            if ( $order->get_order_key() != $order_key ) {\n                $order = false;\n            }\n        }\n\n        if ( isset ( $order ) ) {\n\t    $title = sprintf( \"Danke %s!\", esc_html( $order->get_billing_first_name() ) );\n        }\n    }\n    return $title;\n}","priority":"10"},{"name":"WC - Thankyoupage - Order received Text","scope":"global","code":"add_filter('woocommerce_thankyou_order_received_text', 'woo_change_order_received_text', 10, 2 );\nfunction woo_change_order_received_text( $str, $order ) {\n    $new_str = $str . '<br><br>Bitte pr\u00fcfe Deine Angaben. Falls etwas nicht stimmt, melde Dich bei: <a href=\"mailto:kontakt@benevablack.ch?subject=Bitte%20meine%20Daten%20anpassen\">kontakt@benevablack.ch<\/a>';\n    return $new_str;\n}","priority":"10"},{"name":"WC - Auto Check create Account","scope":"global","code":"add_filter('woocommerce_create_account_default_checked' , function ($checked){\n    return true;\n});","priority":"10"},{"name":"WP - Change WP-Admin Logo","scope":"global","code":"function my_login_logo_one() { \n?> \n<style type=\"text\/css\"> \nbody.login div#login h1 a {\n background-image: url(https:\/\/www.benevablack.ch\/wp-content\/uploads\/2020\/10\/logo-bvb.svg);\npadding-bottom: 30px; \n} \n<\/style>\n <?php \n} add_action( 'login_enqueue_scripts', 'my_login_logo_one' );","priority":"10"},{"name":"WC - Hide shipping rates when free shipping is available.","scope":"global","code":"\/**\n * Hide shipping rates when free shipping is available.\n * Updated to support WooCommerce 2.6 Shipping Zones.\n *\n * @param array $rates Array of rates found for the package.\n * @return array\n *\/\nfunction my_hide_shipping_when_free_is_available( $rates ) {\n\t$free = array();\n\tforeach ( $rates as $rate_id => $rate ) {\n\t\tif ( 'free_shipping' === $rate->method_id ) {\n\t\t\t$free[ $rate_id ] = $rate;\n\t\t\tbreak;\n\t\t}\n\t}\n\treturn ! empty( $free ) ? $free : $rates;\n}\nadd_filter( 'woocommerce_package_rates', 'my_hide_shipping_when_free_is_available', 100 );","priority":"10"},{"name":"WC - Cart - Amount left for Free Shipping","scope":"global","code":"\/**\n * Show a message at the cart\/checkout displaying\n * how much to go for free shipping.\n *\/\nfunction my_custom_wc_free_shipping_notice() {\n\n\tif ( ! is_cart() ) { \/\/ Remove partial if you don't want to show it on cart\/checkout\n\t\treturn;\n\t}\n\n\t$packages = WC()->cart->get_shipping_packages();\n\t$package = reset( $packages );\n\t$zone = wc_get_shipping_zone( $package );\n\n\t$cart_total = WC()->cart->get_displayed_subtotal();\n\tif ( WC()->cart->display_prices_including_tax() ) {\n\t\t$cart_total = round( $cart_total - ( WC()->cart->get_discount_total() + WC()->cart->get_discount_tax() ), wc_get_price_decimals() );\n\t} else {\n\t\t$cart_total = round( $cart_total - WC()->cart->get_discount_total(), wc_get_price_decimals() );\n\t}\n\tforeach ( $zone->get_shipping_methods( true ) as $k => $method ) {\n\t\t$min_amount = $method->get_option( 'min_amount' );\n\n\n\t\tif ( $method->id == 'free_shipping' && ! empty( $min_amount ) && $cart_total < $min_amount ) {\n\t\t\t$remaining = $min_amount - $cart_total;\n\t\t\twc_add_notice( sprintf( 'F\u00fcge jetzt noch <strong>%s<\/strong> zu Deinem Warenkorb hinzu f\u00fcr kostenlosen Versand! <br><a href=\"\/shop\/\">\u2190 Zur\u00fcck zum Shop<\/a> ', wc_price( $remaining ) ) );\n\t\t}\n\t}\n\n}\nadd_action( 'wp', 'my_custom_wc_free_shipping_notice' );","priority":"10"},{"name":"WC - Single Product - Product Availability","scope":"global","code":"add_filter('woocommerce_get_availability', 'custom_get_availability', 1, 2);\nfunction custom_get_availability($availability, $product) {\n  if ($availability['availability'] == '') {\n    $availability['availability'] = __('Sofort lieferbar', 'woocommerce');\n  }\n  return $availability;\n}","priority":"10"},{"name":"WC - Cart - Product Availability","scope":"global","code":"add_filter( 'woocommerce_cart_item_name', 'add_availability_below_cart_item_name', 10, 3);\nfunction add_availability_below_cart_item_name( $item_name, $cart_item, $cart_item_key ) {\n    $availability = $cart_item['data']->get_availability();\n    return $item_name . '<br>' . $availability['availability'];\n}","priority":"10"},{"name":"WC - Subscriptions - Prevent Subscription Options from Showing up next to Cart-Items","scope":"global","code":" add_filter( 'wcsatt_show_cart_item_options', '__return_false' );","priority":"10"},{"name":"WC - Checkout - Remove Fields Labels","scope":"global","code":"add_filter('woocommerce_checkout_fields','custom_wc_checkout_fields_no_label');\n\n\/\/ Our hooked in function - $fields is passed via the filter!\n\/\/ Action: remove label from $fields\nfunction custom_wc_checkout_fields_no_label($fields) {\n    \/\/ loop by category\n    foreach ($fields as $category => $value) {\n        \/\/ loop by fields\n        foreach ($fields[$category] as $field => $property) {\n            \/\/ remove label property\n            unset($fields[$category][$field]['label']);\n        }\n    }\n     return $fields;\n}","priority":"10"},{"name":"WC- Cart\/Checkout- Hide Shipping Label","scope":"global","code":"add_filter( 'woocommerce_cart_shipping_method_full_label', 'bbloomer_remove_shipping_label', 9999, 2 );\n   \nfunction bbloomer_remove_shipping_label( $label, $method ) {\n    $new_label = preg_replace( '\/^.+:\/', '', $label );\n    return $new_label;\n}","priority":"10"},{"name":"WC - Price Based on Country - Non Base Location fix","scope":"global","code":"add_filter( 'woocommerce_adjust_non_base_location_prices', '__return_false' );","priority":"10"},{"name":"WC - Cart - Crosssells","scope":"global","code":"\/\/ ---------------------------------------------\n\/\/ Remove Cross Sells From Default Position \n \nremove_action( 'woocommerce_cart_collaterals', 'woocommerce_cross_sell_display' );\n \n \n\/\/ ---------------------------------------------\n\/\/ Add them back UNDER the Cart Table\n \nadd_action( 'woocommerce_proceed_to_checkout', 'woocommerce_cross_sell_display' );\n \n \n\/\/ ---------------------------------------------\n\/\/ Display Cross Sells on 3 columns instead of default 4\n \nadd_filter( 'woocommerce_cross_sells_columns', 'bbloomer_change_cross_sells_columns' );\n \nfunction bbloomer_change_cross_sells_columns( $columns ) {\nreturn 2;\n}\n \n \n\/\/ ---------------------------------------------\n\/\/ Display Only 3 Cross Sells instead of default 4\n \nadd_filter( 'woocommerce_cross_sells_total', 'bbloomer_change_cross_sells_product_no' );\n  \nfunction bbloomer_change_cross_sells_product_no( $columns ) {\nreturn 2;\n}","priority":"10"},{"name":"WC - Single Product - Quantity Changer","scope":"global","code":"\/\/ 1. Show Buttons \/\/ woocommerce template override in child theme.\n  \n   \n\/\/ -------------\n\/\/ 2. Trigger jQuery script\n  \nadd_action( 'wp_footer', 'bbloomer_add_cart_quantity_plus_minus', 9999 );\n  \nfunction bbloomer_add_cart_quantity_plus_minus() {\n   \/\/ Only run this on the single product page\n  \/\/ if ( ! is_product() || !is_page('cart') ) return;\n   ?>\n      <script type=\"text\/javascript\">\n           \n      jQuery(document).ready(function($){   \n           \n         $('form.cart').on( 'click', 'button.plus, button.minus', function() {\n  \n            \/\/ Get current quantity values\n            var qty = $( this ).closest( 'form.cart' ).find( '.input-text.qty:visible' ).first();\n\t\t\t \/\/var qty = jQuery(this).parent( 'div' ).find( '.input-text.qty:visible' );\n            var val   = parseInt(qty.val());\n            var max = parseInt(qty.attr( 'max' ));\n            var min = parseInt(qty.attr( 'min' ));\n            var step = parseInt(qty.attr( 'step' ));\n  \n            \/\/ Change the value if plus or minus\n            if ( $( this ).is( '.plus' ) ) {\n               if ( max && ( max <= val ) ) {\n                  qty.val( max );\n               } else {\n\t\t\t\t   var newVal = val+step;\n                  qty.val(newVal);\n               }\n            } else {\n               if ( min && ( min >= val ) ) {\n                  qty.val( min );\n               } else if ( val > 1 ) {\n                  qty.val( val - step );\n               }\n            }\n\t\t\t \n\t\t\tif ($(document).find('.discount-badge').length) {\n\t\t\t\t$(document).find('.discount-badge').remove();\n\t\t\t}\n\t\t\t \n\t\t\tvar discountRatio = '10%'; \n\t\t\t\n\t\t\t if (qty.val() > 1) {\n\t\t\t\tvar discountRatio = '20%';\n\t\t\t}\n\t\t\t  if(qty.val() > 0) {\n\t\t\t\t  var discountBadge = '<span class=\"discount-badge\">-'+discountRatio+'<\/span>';\n\t\t\t\t$('button.plus').append(discountBadge);\n\t\t\t  }              \n         });\n\t\t  \n\t\t  $(document).on( 'click', 'form.woocommerce-cart-form button.plus, form.woocommerce-cart-form button.minus', function() {\n\t\t\t\t\t\t\t\t\t\t\t \n\t\t\t  \/\/ Get current quantity values\n            var qty = $( this ).parents( 'td.product-quantity' ).find( 'input.qty:visible' ).first();\n            var val   = parseInt(qty.val());\n            var max = parseInt(qty.attr( 'max' ));\n            var min = parseInt(qty.attr( 'min' ));\n            var step = parseInt(qty.attr( 'step' ));\n  \n            \/\/ Change the value if plus or minus\n            if ( $( this ).is( '.plus' ) ) {\n               if ( max && ( max <= val ) ) {\n                  qty.val( max );\n               } else {\n\t\t\t\t   var newVal = val+step;\n                  qty.val(newVal);\n               }\n            } else {\n               if ( min && ( min >= val ) ) {\n                  qty.val( min );\n               } else if ( val > 1 ) {\n                  qty.val( val - step );\n               }\n            }\n\t\t\t  \n\t\t\t\/\/  if ($(document).find('.discount-badge').length) {\n\t\t\t\t\/\/$(document).find('.discount-badge').remove();\n\t\t\/\/\t}\n\t\t\t \n\t\t\tvar discountRatio = '10%'; \n\t\t\t\n\t\t\t if (qty.val() > 1) {\n\t\t\t\tvar discountRatio = '20%';\n\t\t\t}\n\t\t\t  if(qty.val() > 0) {\n\t\t\t\t  var discountBadge = '<span class=\"discount-badge\">-'+discountRatio+'<\/span>';\n\t\t\t\t  $(this).parents('td').find('button.plus').find('.discount-badge').remove();\n\t\t\t\t\t$(this).parents('td').find('button.plus').append(discountBadge);\n\t\t\t  }\n\t\t\t  \n\t\t\t  qty.trigger('change');\n\n\t\t  });\n           \n      });\n           \n      <\/script>\n   <?php\n}","priority":"10"},{"name":"WC - Change Sale Text","scope":"global","code":"add_filter('woocommerce_sale_flash', 'woocommerce_custom_sale_text', 10, 3);\nfunction woocommerce_custom_sale_text($text, $post, $_product)\n{\n    return '<span class=\"onsale\">SALE<\/span>';\n}\n","priority":"10"},{"name":"WC - Variable Product \"Ab\" Instead of Range","scope":"global","code":"add_filter( 'woocommerce_variable_price_html', 'bbloomer_variation_price_format_min', 9999, 2 );\n  \nfunction bbloomer_variation_price_format_min( $price, $product ) {\n   $prices = $product->get_variation_prices( true );\n   $min_price = current( $prices['price'] );\n   $price = sprintf( __( 'Ab %1$s', 'woocommerce' ), wc_price( $min_price ) );\n   return $price;\n}","priority":"10"},{"name":"WC - Single Product - Quantity Discount","scope":"global","code":"\/\/ Utility function that give the discount percentage based on quantity argument\nfunction get_discount_percent( $quantity ){\n    $percent = 0;\n\t\t\n\tif( $quantity == 2 ) {\n        $percent = 10; \/\/ 10%\n\t}\n\t\n\tif( $quantity > 2 ) {\n        $percent = 20; \/\/ 20%\n\t}\n\t\n    return $percent;\n}\n\n\nadd_filter('woocommerce_add_cart_item_data', 'add_items_default_price_as_custom_data', 1000, 3 );\nfunction add_items_default_price_as_custom_data( $cart_item_data, $product_id, $variation_id ){\n    $product_id = $variation_id > 0 ? $variation_id : $product_id;\n\t\n    ## ----- YOUR SETTING ----- ##\n    $percent_1 = 10; \/\/  Discount (10%)\n    $percent_2 = 20; \/\/ Discount (20%)\n\n    \/\/ The WC_Product Object\n    $product = wc_get_product($product_id);\n\t\n\tif ($product->is_on_sale()) {\n\t\t$price = (float) $product->get_sale_price();\n\t\t} else {\n\t\t\t$price = (float) $product->get_regular_price();\n\t\t}\n\t\n\t\n    \/\/ Set the Product default base price as custom cart item data\n    $cart_item_data['discount'][0] = $price;\n\n    \/\/ Set the Product discounted price of 10% as custom cart item data\n    $cart_item_data['discount'][$percent_1] = ($price * (100 - ($percent_1))) \/ 100;\n\n    \/\/ Set the Product discounted price of 20% as custom cart item data\n    $cart_item_data['discount'][$percent_2] = ($price * (100 - ($percent_2))) \/ 100;\n\t\n    return $cart_item_data;\n}\n\nadd_action( 'woocommerce_before_calculate_totals', 'set_custom_discount_cart_item_price', 9999, 1 );\nadd_filter( 'woocommerce_before_calculate_totals', 'set_custom_discount_cart_item_price', 9999, 1 );\nfunction set_custom_discount_cart_item_price( $cart ) {\n    if ( is_admin() && ! defined( 'DOING_AJAX' ) )\n        return;\n\n    if ( did_action( 'woocommerce_before_calculate_totals' ) >= 2 )\n        return;\n\n\t$array = [];\n\t\n    foreach( $cart->cart_contents as $cart_item ){\n        \/\/ get the percent based on quantity\n        $percentage = get_discount_percent($cart_item['quantity']);\n\t\t\n        \/\/ For items non on sale set a discount based on quantity as defined in\n        $cart_item['data']->set_price($cart_item['discount'][$percentage]);\n    }\n\n\treturn $cart;\n}","priority":"10"},{"name":"WC - Paypal order received ","scope":"global","code":"add_action('woocommerce_order_status_changed', 'woocommerce_payment_complete_order_status',10,3);\nfunction woocommerce_payment_complete_order_status($order_id)\n{\n    if ( ! $order_id ) {\n        return;\n    }\n    $order = wc_get_order( $order_id );\n    if ($order->data['status'] == 'wc-processing') {\n        $payment_method=$order->get_payment_method();\n        if ($payment_method != \"cod\")\n        {\n            $order->update_status( 'wc-completed' );\n        }\n    }\n}","priority":"10"},{"name":"WC- Shipping cost inclusive tax","scope":"global","code":"add_filter('woocommerce_shipping_method_add_rate', function($rate, $args, $shipping_method) {\n  $original_taxes = array_sum($rate->get_taxes());\n  \/\/ No need to perform a recalculation if either taxes or costs are zero (or negative, in\n  \/\/ which case they are not valid)\n  if(($original_taxes <= 0) || ($rate->get_cost() <= 0)) {\n    return $rate;\n  }\n  $recalc_ratio = $rate->get_cost() \/ ($rate->get_cost() + $original_taxes);\n  $rate->set_cost(round($rate->get_cost() * $recalc_ratio, 2));\n\n  $taxes = ($args['calc_tax'] === 'per_item') ? $shipping_method->get_taxes_per_item($rate->get_cost()) : WC_Tax::calc_shipping_tax($rate->get_cost(), WC_Tax::get_shipping_tax_rates());\n  $rate->set_taxes($taxes);\n  return $rate;\n}, 999, 3);","priority":"10"},{"name":"WC - Disable\/Enable specific Gateway for specific Billing Country","scope":"global","code":"add_filter( 'woocommerce_available_payment_gateways', 'bbloomer_payment_gateway_disable_country' );\n  \nfunction bbloomer_payment_gateway_disable_country( $available_gateways ) {\nglobal $woocommerce;\nif ( is_admin() ) return;\nif ( isset( $available_gateways['PowerpayCw_OpenInvoice'] ) && (WC()->customer->get_billing_country() != 'CH' && WC()->customer->get_billing_country() != 'LI' && WC()->customer->get_billing_country() != 'DE' && WC()->customer->get_billing_country() != 'AT')){\nunset( $available_gateways['PowerpayCw_OpenInvoice'] );\n}\nreturn $available_gateways;\n}","priority":"10"},{"name":"WC - Shipment Tracking - Add Tracking URL and Provider","scope":"global","code":"add_filter( 'wc_shipment_tracking_get_providers' , 'wc_shipment_tracking_add_custom_provider' );\n\nfunction wc_shipment_tracking_add_custom_provider( $providers ) {\n\t\n\t$providers['Standart']['Standart'] = 'https:\/\/track.aftership.com\/?tracking-numbers=%1$s';\n\treturn $providers;\n\t\n}","priority":"10"},{"name":"WC - Shipment Tracking - Default Provider","scope":"global","code":"add_filter( 'woocommerce_shipment_tracking_default_provider', 'custom_woocommerce_shipment_tracking_default_provider' );\n\nfunction custom_woocommerce_shipment_tracking_default_provider( $provider ) {\n\t$provider = 'Standart'; \n\treturn $provider;\n}","priority":"10"},{"name":"WC - Shipment Tracking - Hide unused shipping providers","scope":"global","code":"add_filter( 'wc_shipment_tracking_get_providers', 'custom_shipment_tracking' );\n\nfunction custom_shipment_tracking( $providers ) {\n\n    unset($providers['Australia']);\n    unset($providers['Austria']);\n    unset($providers['Brazil']);\n    unset($providers['Belgium']);\n    unset($providers['Canada']);\n    unset($providers['Czech Republic']);\n    unset($providers['Finland']);\n    unset($providers['France']);\n    unset($providers['Germany']);\n    unset($providers['Ireland']);\n    unset($providers['Italy']);\n    unset($providers['India']);\n    unset($providers['Netherlands']);\n    unset($providers['New Zealand']);\n    unset($providers['Poland']);\n    unset($providers['Romania']);\n    unset($providers['South African']);\n    unset($providers['Sweden']);\n    unset($providers['United Kingdom']);\n    unset($providers['United States']);\n\n    return $providers;\n}","priority":"10"},{"name":"WC - Guest checkout ","scope":"global","code":"add_filter( 'woocommerce_checkout_posted_data', 'ftm_filter_checkout_posted_data', 10, 1 );\nfunction ftm_filter_checkout_posted_data( $data ) {\n \n    $email = $data['billing_email'];\n \n    if ( email_exists( $email ) ) $data['createaccount'] = 0;\n \n    return $data;\n \n}","priority":"10"},{"name":"WC - Link Guest order to Existing Customer, if account exists","scope":"global","code":"\/\/assign user in guest order\nadd_action( 'woocommerce_new_order', 'action_woocommerce_new_order', 10, 1 );\nfunction action_woocommerce_new_order( $order_id ) {\n\t$order = new WC_Order($order_id);\n\t$user = $order->get_user();\n\t\n\tif( !$user ){\n\t\t\/\/guest order\n\t\t$userdata = get_user_by( 'email', $order->get_billing_email() );\n\t\tif(isset( $userdata->ID )){\n\t\t\t\/\/registered\n\t\t\tupdate_post_meta($order_id, '_customer_user', $userdata->ID );\n\t\t}else{\n\t\t\t\/\/Guest\n\t\t}\n\t}\n}","priority":"10"},{"name":"WP - Read More Collapsing","scope":"global","code":"add_action( 'wp_head', function () { ?>\n<script>\nfunction myFunction() {\n  var dots = document.getElementById(\"dots\");\n  var moreText = document.getElementById(\"more\");\n  var btnText = document.getElementById(\"myBtn\");\n\n  if (dots.style.display === \"none\") {\n    dots.style.display = \"inline\";\n    btnText.innerHTML = \"Weiterlesen\";\n    moreText.style.display = \"none\";\n  } else {\n    dots.style.display = \"none\";\n    btnText.innerHTML = \"Weniger anzeigen\";\n    moreText.style.display = \"inline\";\n  }\n}\n<\/script>\n<?php } );","priority":"10"},{"name":"WC - Checkout - Autocheck Checkboxes (Terms)","scope":"global","code":"function autocheck_checkbox( $terms_is_checked ) {\n\treturn true;\n}\nadd_filter( 'woocommerce_terms_is_checked_default', 'autocheck_checkbox', 10 );\n","priority":"10"},{"name":"WC - Change Sale Text (Percentage Discount)","scope":"global","code":"add_action( 'woocommerce_sale_flash', 'sale_badge_percentage', 25 );\n \nfunction sale_badge_percentage() {\n   global $product;\n   if ( ! $product->is_on_sale() ) return;\n   if ( $product->is_type( 'simple' ) ) {\n      $max_percentage = ( ( $product->get_regular_price() - $product->get_sale_price() ) \/ $product->get_regular_price() ) * 100;\n   } \n\telseif( $product->is_type('bundle') ) {\n\t\t$max_percentage = ( ( $product->get_regular_price() - $product->get_sale_price() ) \/ $product->get_regular_price() ) * 100;\n\t}\n\telseif ( $product->is_type( 'variable' ) ) {\n      $max_percentage = 0;\n      foreach ( $product->get_children() as $child_id ) {\n         $variation = wc_get_product( $child_id );\n         $price = $variation->get_regular_price();\n         $sale = $variation->get_sale_price();\n         if ( $price != 0 && ! empty( $sale ) ) $percentage = ( $price - $sale ) \/ $price * 100;\n         if ( $percentage > $max_percentage ) {\n            $max_percentage = $percentage;\n         }\n      }\n   }\n   if ( $max_percentage > 0 ) echo \"<span class='onsale'>-\" . round($max_percentage) . \"%<\/span>\"; \/\/ If you would like to show -40% off then add text after % sign\n}","priority":"10"},{"name":"WC - Remove links from single product image thumbnails","scope":"global","code":"add_filter( 'woocommerce_single_product_image_thumbnail_html', 'wc_remove_link_on_thumbnails' );\nfunction wc_remove_link_on_thumbnails( $html ) {\n\treturn strip_tags( $html, [ 'div', 'img' ] );\n}","priority":"10"},{"name":"WC - Change rel=nofollow to rel=dofollow for add-to-cart-buttons","scope":"global","code":"add_filter( 'woocommerce_loop_add_to_cart_link', 'add_to_cart_dofollow', 10, 2 );\nfunction add_to_cart_dofollow($html, $product){\n\t$html = sprintf( '<a rel=\"dofollow\" href=\"%s\" data-quantity=\"%s\" data-product_id=\"%s\" data-product_sku=\"%s\" class=\"%s\">%s<\/a>',\n\t\tesc_url( $product->add_to_cart_url() ),\n\t\tesc_attr( isset( $quantity ) ? $quantity : 1 ),\n\t\tesc_attr( $product->get_id() ),\n\t\tesc_attr( $product->get_sku() ),\n\t\tesc_attr( isset( $class ) ? $class : 'button' ),\n\t\tesc_html( $product->add_to_cart_text() )\n\t);\n\treturn $html;\n}","priority":"10"},{"name":"WP - Disable Image Links (a tag)","scope":"global","code":"add_filter( 'the_content', 'attachment_image_link_remove_filter' );\n function attachment_image_link_remove_filter( $content ) {\n  $content =\n  preg_replace(\n  array('{<a(.*?)(wp-att|wp-content\/uploads)[^>]*><img}',\n  '{ wp-image-[0-9]*\" \/><\/a>}'),\n  array('<img','\" \/>'),\n  $content\n  );\n  return $content;\n   }","priority":"10"},{"name":"Validate House Number","scope":"global","code":"add_action('woocommerce_checkout_process', 'address_field_validation', 10, 0);\nfunction address_field_validation() {\n\n    \/\/ The field value to check\n    $post_value = $_POST['billing_address_1'];\n\n    \/\/ If there is no number in this field value, stops the checkout process\n    \/\/ and displays an error message.\n    if ( $post_value && ! preg_match( '\/[0-9]+\/', $post_value ) ) {\n\n        \/\/ The error message\n        throw new Exception( sprintf( __( 'Das Adressfeld muss eine Hausnummer enthalten', 'woocommerce' ) ) );\n    }\n}","priority":"10"}]}